from perenos_bot import main_logic
import pytest

pytestmark = pytest.mark.asyncio  # All test coroutines will be treated as marked.


async def test_main_logic():
    text = \
"""–ü—Ä–∏–≤–µ—Ç!‚ù§Ô∏è

–ú—ã —É–∂–µ –≤—ã—è—Å–Ω–∏–ª–∏, —á—Ç–æ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—É–∂–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∞ (–µ—Å–ª–∏ –≤—ã –Ω–µ —Å –Ω–∞–º–∏, —Å–∫–æ—Ä–µ–µ —á–∏—Ç–∞–π—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ—Å—Ç—ã).

‚ùì–û—Ç–≤–µ—á–∞—é –Ω–∞ –≤–æ–∑–º—É—â—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –≤ –¥–∏—Ä–µ–∫—Ç –ø–æ —Ç–∏–ø—É "–ß—Ç–æ —Ç–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∞–≤—Ç–æ—Ä–∞ –∏—Å–∫–∞—Ç—å –∏ –ø–ª–∞—Ç–∏—Ç—å –∑–∞ –∫–∞–∂–¥—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É?"

‚úÖ–ù–µ—Ç! –£ –Ω–∞—Å —Ç—É—Ç –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥! –ú–æ—Ä–∞–ª—å –Ω–µ —á–∏—Ç–∞—é, –ø–∞–ª—å—Ü–µ–º –Ω–µ –≥—Ä–æ–∂—É, –≥–ª–∞–∑–∞ –Ω–µ –∑–∞–∫–∞—Ç—ã–≤–∞—é, –∞ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—é –∫–∞–∫ —Å –∞–≤—Ç–æ—Ä—Å–∫–∏–º –ø—Ä–∞–≤–æ–º –∂–∏—Ç—å, —á—Ç–æ–±—ã –∏ –∞–≤—Ç–æ—Ä–∞–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ö–æ—Ä–æ—à–æ –±—ã–ª–æ.

–ü–æ—ç—Ç–æ–º—É —Å–µ–≥–æ–¥–Ω—è –¥–µ–ª—é—Å—å —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–º, –∞–±—Å–æ–ª—é—Ç–Ω–æ –ª–µ–≥–∞–ª—å–Ω—ã–º –∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—É–∂–∏–µ —Ñ–æ—Ç–æ –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∫–∞–∫ —Ñ–∞–Ω—Ç–∞–∑–∏—è —Ä–µ—à–∏—Ç.

–ü–æ–¥–æ–±—Ä–∞–ª–∞ —Ñ–æ—Ç–æ—Å—Ç–æ–∫–∏, –∫–æ–Ω—Ç–µ–Ω—Ç —Å –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –±–ª–æ–≥–∞—Ö –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª—è—Ö –±–µ—Å–ø–ª–∞—Ç–Ω–æ.

–ù–µ –∑–∞–±—É–¥—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—åüëåüèª
https://instagram.com/avtorprava"""
    result_text = \
"""–ü—Ä–∏–≤–µ—Ç!‚ù§Ô∏è
‚†Ä
–ú—ã —É–∂–µ –≤—ã—è—Å–Ω–∏–ª–∏, —á—Ç–æ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—É–∂–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∞ (–µ—Å–ª–∏ –≤—ã –Ω–µ —Å –Ω–∞–º–∏, —Å–∫–æ—Ä–µ–µ —á–∏—Ç–∞–π—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ—Å—Ç—ã).
‚†Ä
‚ùì–û—Ç–≤–µ—á–∞—é –Ω–∞ –≤–æ–∑–º—É—â—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –≤ –¥–∏—Ä–µ–∫—Ç –ø–æ —Ç–∏–ø—É "–ß—Ç–æ —Ç–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∞–≤—Ç–æ—Ä–∞ –∏—Å–∫–∞—Ç—å –∏ –ø–ª–∞—Ç–∏—Ç—å –∑–∞ –∫–∞–∂–¥—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É?"
‚†Ä
‚úÖ–ù–µ—Ç! –£ –Ω–∞—Å —Ç—É—Ç –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥! –ú–æ—Ä–∞–ª—å –Ω–µ —á–∏—Ç–∞—é, –ø–∞–ª—å—Ü–µ–º –Ω–µ –≥—Ä–æ–∂—É, –≥–ª–∞–∑–∞ –Ω–µ –∑–∞–∫–∞—Ç—ã–≤–∞—é, –∞ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—é –∫–∞–∫ —Å –∞–≤—Ç–æ—Ä—Å–∫–∏–º –ø—Ä–∞–≤–æ–º –∂–∏—Ç—å, —á—Ç–æ–±—ã –∏ –∞–≤—Ç–æ—Ä–∞–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ö–æ—Ä–æ—à–æ –±—ã–ª–æ.
‚†Ä
–ü–æ—ç—Ç–æ–º—É —Å–µ–≥–æ–¥–Ω—è –¥–µ–ª—é—Å—å —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–º, –∞–±—Å–æ–ª—é—Ç–Ω–æ –ª–µ–≥–∞–ª—å–Ω—ã–º –∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—É–∂–∏–µ —Ñ–æ—Ç–æ –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∫–∞–∫ —Ñ–∞–Ω—Ç–∞–∑–∏—è —Ä–µ—à–∏—Ç.
‚†Ä
–ü–æ–¥–æ–±—Ä–∞–ª–∞ —Ñ–æ—Ç–æ—Å—Ç–æ–∫–∏, –∫–æ–Ω—Ç–µ–Ω—Ç —Å –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –±–ª–æ–≥–∞—Ö –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª—è—Ö –±–µ—Å–ø–ª–∞—Ç–Ω–æ.
‚†Ä
–ù–µ –∑–∞–±—É–¥—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—åüëåüèª
https://instagram.com/avtorprava"""
    new_text = await main_logic(text)
    assert new_text == result_text
